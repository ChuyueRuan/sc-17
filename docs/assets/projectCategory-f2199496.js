import{_ as v,d as j,o as E,c as k,a as c,b as l,w as o,F as I,e as s,t as b}from"./index-a0da786e.js";import{c as F,E as p,a as S,b as P,d as U,e as z,f as L,g as W}from"./el-table-column-ae829375.js";import{E as $,a as O,b as B,c as N}from"./el-form-item-49f3f214.js";import{E as D}from"./el-message-f42fc2e1.js";import{g as T,a as A,d as M,b as q,u as G}from"./projectCategory-cc444cf8.js";const H=j({data(){return{categories:[],page:{total:0,current:1,size:10},searchId:null,dialogFormVisible:!1,projectCategory:{id:0,level:0,name:"",navStatus:0,parentId:0,showStatus:0},formLabelWidth:80}},mounted(){this.getCategoriesPage(1)},methods:{search(){if(this.searchId==null||this.searchId==""){alert("请输入商品分类编号后查询");return}T(this.searchId).then(e=>{e.data==null?this.categories=[]:(this.categories=[],this.categories.push(e.data.help))}).catch(e=>{console.log(e)})},research(){this.searchId=null,this.getCategoriesPage(1)},toEdit(e){this.dialogFormVisible=!0,this.projectCategory=F(e)},getCategoriesPage(e){A({current:e,size:10}).then(u=>{console.log(u);const g=u.data.page;this.categories=g.records,this.page=g}).catch(u=>{console.log(u)})},currentchange(e){this.getCategoriesPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),M(e).then(t=>{if(t.success)this.getCategoriesPage(this.page.current);else return!1}).catch(t=>{})},toAdd(){this.dialogFormVisible=!0,this.projectCategory={id:0,level:0,name:"",navStatus:0,parentId:0,showStatus:0}},save(){const e=this.projectCategory;e.id==0?q(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getCategoriesPage(this.page.current),p(t.msg);else return p(t.msg),!1}).catch(t=>{p("网络错误联系管理员")}):G(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getCategoriesPage(this.page.current),p(t.msg);else return p(t.msg),!1}).catch(t=>{p("网络错误联系管理员")})}}}),J={style:{"margin-top":"10px"}},K={style:{width:"95%",margin:"0 auto"}},Q={class:"dialog-footer"};function R(e,t,u,g,X,Y){const m=B,i=$,d=O,r=z,f=S,C=P,n=L,h=W,y=D,w=N,V=U;return E(),k(I,null,[c("div",J,[c("div",K,[l(i,{label:"商品分类编号","label-width":110,style:{display:"inline-flex","margin-right":"10px"}},{default:o(()=>[l(m,{modelValue:e.searchId,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchId=a),placeholder:"请输入商品分类编号"},null,8,["modelValue"])]),_:1}),l(d,{type:"primary",onClick:e.search},{default:o(()=>[s("查询")]),_:1},8,["onClick"]),l(d,{type:"warning",onClick:e.research},{default:o(()=>[s("重置")]),_:1},8,["onClick"]),l(d,{type:"success",onClick:e.toAdd},{default:o(()=>[s("添加")]),_:1},8,["onClick"])]),l(f,{data:e.categories,style:{width:"95%",margin:"0 auto"}},{default:o(()=>[l(r,{prop:"id",label:"编号",width:"80"}),l(r,{prop:"name",label:"名称",width:"120"}),l(r,{label:"分类级别",width:"100"},{default:o(a=>[s(b(a.row.level==0?"1级":"2级"),1)]),_:1}),l(r,{label:"显示在导航栏",width:"120"},{default:o(a=>[s(b(a.row.navStatus==0?"不显示":"显示"),1)]),_:1}),l(r,{label:"上级编号",width:"100",prop:"parentId"}),l(r,{label:"显示状态",width:"100"},{default:o(a=>[s(b(a.row.showStatus==0?"不显示":"显示"),1)]),_:1}),l(r,{label:"描述",width:"120",prop:"description"}),l(r,{fixed:"right",label:"功能管理",width:"120"},{default:o(a=>[l(d,{link:"",type:"primary",size:"small",onClick:_=>e.toEdit(a.row)},{default:o(()=>[s("更新")]),_:2},1032,["onClick"]),l(d,{link:"",type:"primary",size:"small",onClick:_=>e.del(a.row.id)},{default:o(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(C,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"95%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[8]||(t[8]=a=>e.dialogFormVisible=a),title:"商品分类编辑"},{footer:o(()=>[c("span",Q,[l(d,{onClick:t[7]||(t[7]=a=>e.dialogFormVisible=!1)},{default:o(()=>[s("取消")]),_:1}),l(d,{type:"primary",onClick:e.save},{default:o(()=>[s("保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(w,{model:e.projectCategory},{default:o(()=>[l(i,{label:"名称","label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.projectCategory.name,"onUpdate:modelValue":t[1]||(t[1]=a=>e.projectCategory.name=a),placeholder:"请输入名称",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"分类等级","label-width":e.formLabelWidth},{default:o(()=>[l(h,{modelValue:e.projectCategory.level,"onUpdate:modelValue":t[2]||(t[2]=a=>e.projectCategory.level=a),placeholder:"请选择分类等级",style:{width:"80%"}},{default:o(()=>[l(n,{label:"1级",value:0}),l(n,{label:"2级",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"导航栏","label-width":e.formLabelWidth},{default:o(()=>[l(h,{modelValue:e.projectCategory.navStatus,"onUpdate:modelValue":t[3]||(t[3]=a=>e.projectCategory.navStatus=a),placeholder:"请选择是否显示在导航栏",style:{width:"80%"}},{default:o(()=>[l(n,{label:"不显示",value:0}),l(n,{label:"显示",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"上级编号","label-width":e.formLabelWidth},{default:o(()=>[l(y,{modelValue:e.projectCategory.parentId,"onUpdate:modelValue":t[4]||(t[4]=a=>e.projectCategory.parentId=a),placeholder:"请输入上级编号",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"显示状态","label-width":e.formLabelWidth},{default:o(()=>[l(h,{modelValue:e.projectCategory.showStatus,"onUpdate:modelValue":t[5]||(t[5]=a=>e.projectCategory.showStatus=a),placeholder:"请选择显示状态",style:{width:"80%"}},{default:o(()=>[l(n,{label:"不显示",value:0}),l(n,{label:"显示",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"描述","label-width":e.formLabelWidth},{default:o(()=>[l(m,{modelValue:e.projectCategory.description,"onUpdate:modelValue":t[6]||(t[6]=a=>e.projectCategory.description=a),placeholder:"请输入描述",type:"textarea",rows:2},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ae=v(H,[["render",R],["__scopeId","data-v-0940bbd0"]]);export{ae as default};
