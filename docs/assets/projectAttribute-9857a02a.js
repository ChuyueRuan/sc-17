import{i as g,_ as v,d as T,r as P,o as E,c as k,a as c,b as t,w as o,F as S,e as r,t as m}from"./index-a0da786e.js";import{c as I,E as h,a as F,b as U,d as L,e as W,f as z,g as $}from"./el-table-column-ae829375.js";import{E as O,a as B,b as N,c as D}from"./el-form-item-49f3f214.js";import{E as K}from"./el-message-f42fc2e1.js";import{g as M}from"./projectAttributeCategory-e0d1fe07.js";import{T as q}from"./TPaginationSelect-3c50ff69.js";function G(e){return g({url:"/mall/pms-product-attribute/page",method:"post",data:e})}function H(e){return g({url:`/mall/pms-product-attribute/one/${e}`,method:"get"})}function J(e){return g({url:`/mall/pms-product-attribute/del/${e}`,method:"get"})}function Q(e){return g({url:"/mall/pms-product-attribute/add",method:"post",data:e})}function R(e){return g({url:"/mall/pms-product-attribute/edit",method:"post",data:e})}const X=T({data(){return{attributes:[],page:{total:0,current:1,size:10},selectPage:{total:0,current:1,size:6,pagerCount:5},searchId:null,dialogFormVisible:!1,projectAttribute:{filterType:0,handAddStatus:0,inputType:0,name:"",id:0,relatedStatus:0,searchType:1,selectType:1,sort:0,type:0},categories:[],formLabelWidth:80}},mounted(){this.getAttributesPage(1),this.getCategoriesPage(1)},components:{"t-pagination-select":q},methods:{search(){if(this.searchId==null||this.searchId==""){alert("请输入商品属性编号后查询");return}H(this.searchId).then(e=>{e.data==null?this.attributes=[]:(this.attributes=[],this.attributes.push(e.data.help))}).catch(e=>{console.log(e)})},research(){this.searchId=null,this.getAttributesPage(1)},toEdit(e){this.dialogFormVisible=!0,this.projectAttribute=I(e)},getCategoriesPage(e){M({current:e,size:6}).then(n=>{const b=n.data.page;this.categories=b.records,this.selectPage=b}).catch(n=>{console.log(n)})},pageChange(e){this.getCategoriesPage(e)},getAttributesPage(e){G({current:e,size:10}).then(n=>{console.log(n);const b=n.data.page;this.attributes=b.records,this.page=b}).catch(n=>{console.log(n)})},currentchange(e){this.getAttributesPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),J(e).then(l=>{if(l.success)this.getAttributesPage(this.page.current);else return!1}).catch(l=>{})},toAdd(){this.dialogFormVisible=!0,this.projectAttribute={id:0,filterType:0,handAddStatus:0,inputType:0,name:"",relatedStatus:0,searchType:1,selectType:1,sort:0,type:0}},save(){const e=this.projectAttribute;e.id==0?Q(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAttributesPage(this.page.current),h(l.msg);else return h(l.msg),!1}).catch(l=>{h("网络错误联系管理员")}):R(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getAttributesPage(this.page.current),h(l.msg);else return h(l.msg),!1}).catch(l=>{h("网络错误联系管理员")})}}}),Y={style:{"margin-top":"10px"}},Z={style:{width:"95%",margin:"0 auto"}},x={class:"dialog-footer"};function ee(e,l,n,b,te,le){const f=N,d=O,u=B,s=W,y=F,w=U,i=z,p=$,V=P("t-pagination-select"),A=K,C=D,j=L;return E(),k(S,null,[c("div",Y,[c("div",Z,[t(d,{label:"商品属性编号","label-width":110,style:{display:"inline-flex","margin-right":"10px"}},{default:o(()=>[t(f,{modelValue:e.searchId,"onUpdate:modelValue":l[0]||(l[0]=a=>e.searchId=a),placeholder:"请输入商品属性编号"},null,8,["modelValue"])]),_:1}),t(u,{type:"primary",onClick:e.search},{default:o(()=>[r("查询")]),_:1},8,["onClick"]),t(u,{type:"warning",onClick:e.research},{default:o(()=>[r("重置")]),_:1},8,["onClick"]),t(u,{type:"success",onClick:e.toAdd},{default:o(()=>[r("添加")]),_:1},8,["onClick"])]),t(y,{data:e.attributes,style:{width:"95%",margin:"0 auto"}},{default:o(()=>[t(s,{prop:"id",label:"编号",width:"80"}),t(s,{prop:"name",label:"名称",width:"120"}),t(s,{label:"筛选样式",width:"100"},{default:o(a=>[r(m(a.row.filterType==0?"普通":"颜色"),1)]),_:1}),t(s,{label:"支持手动",width:"100"},{default:o(a=>[r(m(a.row.handAddStatus==0?"不支持":"支持"),1)]),_:1}),t(s,{label:"录入方式",width:"120"},{default:o(a=>[r(m(a.row.inputType==0?"手工录入":"列表中选取"),1)]),_:1}),t(s,{label:"是否关联",width:"100"},{default:o(a=>[r(m(a.row.relatedStatus==0?"不关联":"关联"),1)]),_:1}),t(s,{label:"检索类型",width:"100"},{default:o(a=>[r(m(a.row.searchType==1?"关键字检索":"范围检索"),1)]),_:1}),t(s,{label:"选择类型",width:"100"},{default:o(a=>[r(m(a.row.selectType==0?"单选":"多选"),1)]),_:1}),t(s,{label:"属性的类型",width:"100"},{default:o(a=>[r(m(a.row.type==0?"规格":"参数"),1)]),_:1}),t(s,{fixed:"right",label:"功能管理",width:"120"},{default:o(a=>[t(u,{link:"",type:"primary",size:"small",onClick:_=>e.toEdit(a.row)},{default:o(()=>[r("更新")]),_:2},1032,["onClick"]),t(u,{link:"",type:"primary",size:"small",onClick:_=>e.del(a.row.id)},{default:o(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(w,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"95%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),t(j,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[12]||(l[12]=a=>e.dialogFormVisible=a),title:"商品属性编辑"},{footer:o(()=>[c("span",x,[t(u,{onClick:l[11]||(l[11]=a=>e.dialogFormVisible=!1)},{default:o(()=>[r("取消")]),_:1}),t(u,{type:"primary",onClick:e.save},{default:o(()=>[r("保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[t(C,{model:e.projectAttribute},{default:o(()=>[t(d,{label:"名称","label-width":e.formLabelWidth},{default:o(()=>[t(f,{modelValue:e.projectAttribute.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.projectAttribute.name=a),placeholder:"请输入名称",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"筛选样式","label-width":e.formLabelWidth},{default:o(()=>[t(p,{modelValue:e.projectAttribute.filterType,"onUpdate:modelValue":l[2]||(l[2]=a=>e.projectAttribute.filterType=a),placeholder:"请选择筛选样式",style:{width:"80%"}},{default:o(()=>[t(i,{label:"普通",value:0}),t(i,{label:"颜色",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"支持手动","label-width":e.formLabelWidth},{default:o(()=>[t(p,{modelValue:e.projectAttribute.handAddStatus,"onUpdate:modelValue":l[3]||(l[3]=a=>e.projectAttribute.handAddStatus=a),placeholder:"请选择支持手动",style:{width:"80%"}},{default:o(()=>[t(i,{label:"不支持",value:0}),t(i,{label:"支持",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"录入方式","label-width":e.formLabelWidth},{default:o(()=>[t(p,{modelValue:e.projectAttribute.inputType,"onUpdate:modelValue":l[4]||(l[4]=a=>e.projectAttribute.inputType=a),placeholder:"请选择录入方式",style:{width:"80%"}},{default:o(()=>[t(i,{label:"手工录入",value:0}),t(i,{label:"列表中选取",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"是否关联","label-width":e.formLabelWidth},{default:o(()=>[t(p,{modelValue:e.projectAttribute.relatedStatus,"onUpdate:modelValue":l[5]||(l[5]=a=>e.projectAttribute.relatedStatus=a),placeholder:"请选择是否关联",style:{width:"80%"}},{default:o(()=>[t(i,{label:"不关联",value:0}),t(i,{label:"关联",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"商品属性分类","label-width":100},{default:o(()=>[t(V,{onPageChange:e.pageChange,optionSource:e.categories,modelValue:e.projectAttribute.productAttributeCategoryId,"onUpdate:modelValue":l[6]||(l[6]=a=>e.projectAttribute.productAttributeCategoryId=a),labelKey:"name",valueKey:"id",style:{width:"80%"},placeholder:"请选择商品属性分类",paginationOption:e.selectPage},null,8,["onPageChange","optionSource","modelValue","paginationOption"])]),_:1}),t(d,{label:"检索类型","label-width":e.formLabelWidth},{default:o(()=>[t(p,{modelValue:e.projectAttribute.searchType,"onUpdate:modelValue":l[7]||(l[7]=a=>e.projectAttribute.searchType=a),placeholder:"请选择检索类型",style:{width:"80%"}},{default:o(()=>[t(i,{label:"关键字检索",value:1}),t(i,{label:"范围检索",value:2})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"选择类型","label-width":e.formLabelWidth},{default:o(()=>[t(p,{modelValue:e.projectAttribute.selectType,"onUpdate:modelValue":l[8]||(l[8]=a=>e.projectAttribute.selectType=a),placeholder:"请选择选择类型",style:{width:"80%"}},{default:o(()=>[t(i,{label:"单选",value:1}),t(i,{label:"多选",value:2})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"排序","label-width":e.formLabelWidth},{default:o(()=>[t(A,{modelValue:e.projectAttribute.sort,"onUpdate:modelValue":l[9]||(l[9]=a=>e.projectAttribute.sort=a),style:{width:"80%"},placeholder:"请输入排序"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(d,{label:"类型","label-width":e.formLabelWidth},{default:o(()=>[t(p,{modelValue:e.projectAttribute.selectType,"onUpdate:modelValue":l[10]||(l[10]=a=>e.projectAttribute.selectType=a),placeholder:"请选择类型",style:{width:"80%"}},{default:o(()=>[t(i,{label:"规格",value:0}),t(i,{label:"参数",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ne=v(X,[["render",ee],["__scopeId","data-v-8116a957"]]);export{ne as default};
