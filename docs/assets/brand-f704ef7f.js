import{_ as V,d as E,o as k,c as v,a as h,b as a,w as t,F as B,e as n,t as F}from"./index-a0da786e.js";import{c as S,E as i,a as I,b as P,d as z,e as U,f as $,g as L}from"./el-table-column-ae829375.js";import{E as W,a as O,b as N,c as D}from"./el-form-item-49f3f214.js";import{E as T}from"./el-message-f42fc2e1.js";import{a as A,g as M,d as j,b as q,u as G}from"./brand-b93b9508.js";const H=E({data(){return{brands:[],page:{total:0,current:1,size:10},searchId:null,dialogFormVisible:!1,brand:{brandStory:"",factoryStatus:0,id:0,name:"",productCommentCount:0,productCount:0},formLabelWidth:80}},mounted(){this.getBrandsPage(1)},methods:{search(){if(this.searchId==null||this.searchId==""){alert("请输入品牌编号后查询");return}A(this.searchId).then(e=>{e.data==null?this.brands=[]:(this.brands=[],this.brands.push(e.data.help))}).catch(e=>{console.log(e)})},research(){this.searchId=null,this.getBrandsPage(1)},toEdit(e){this.dialogFormVisible=!0,this.brand=S(e)},getBrandsPage(e){M({current:e,size:10}).then(u=>{console.log(u);const m=u.data.page;this.brands=m.records,this.page=m}).catch(u=>{console.log(u)})},currentchange(e){this.getBrandsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),j(e).then(l=>{if(l.success)this.getBrandsPage(this.page.current);else return!1}).catch(l=>{})},toAdd(){this.dialogFormVisible=!0,this.brand={brandStory:"",factoryStatus:0,id:0,name:"",productCommentCount:0,productCount:0}},save(){const e=this.brand;e.id==0?q(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getBrandsPage(this.page.current),i(l.msg);else return i(l.msg),!1}).catch(l=>{i("网络错误联系管理员")}):G(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getBrandsPage(this.page.current),i(l.msg);else return i(l.msg),!1}).catch(l=>{i("网络错误联系管理员")})}}}),J={style:{"margin-top":"10px"}},K={style:{width:"95%",margin:"0 auto"}},Q={class:"dialog-footer"};function R(e,l,u,m,X,Y){const p=N,s=W,d=O,r=U,c=I,f=P,b=$,y=L,g=T,C=D,_=z;return k(),v(B,null,[h("div",J,[h("div",K,[a(s,{label:"品牌编号","label-width":80,style:{display:"inline-flex","margin-right":"10px"}},{default:t(()=>[a(p,{modelValue:e.searchId,"onUpdate:modelValue":l[0]||(l[0]=o=>e.searchId=o),placeholder:"请输入品牌编号"},null,8,["modelValue"])]),_:1}),a(d,{type:"primary",onClick:e.search},{default:t(()=>[n("查询")]),_:1},8,["onClick"]),a(d,{type:"warning",onClick:e.research},{default:t(()=>[n("重置")]),_:1},8,["onClick"]),a(d,{type:"success",onClick:e.toAdd},{default:t(()=>[n("添加")]),_:1},8,["onClick"])]),a(c,{data:e.brands,style:{width:"95%",margin:"0 auto"}},{default:t(()=>[a(r,{prop:"id",label:"编号",width:"80"}),a(r,{prop:"name",label:"名称",width:"120"}),a(r,{label:"是否是制造商",width:"120"},{default:t(o=>[n(F(o.row.factoryStatus==0?"不是":"是"),1)]),_:1}),a(r,{prop:"productCount",label:"产品数量",width:"120"}),a(r,{prop:"productCommentCount",label:"评论数量",width:"120"}),a(r,{prop:"brandStory",label:"品牌故事",width:"300"}),a(r,{fixed:"right",label:"功能管理",width:"120"},{default:t(o=>[a(d,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(o.row)},{default:t(()=>[n("更新")]),_:2},1032,["onClick"]),a(d,{link:"",type:"primary",size:"small",onClick:w=>e.del(o.row.id)},{default:t(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"95%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),a(_,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[7]||(l[7]=o=>e.dialogFormVisible=o),title:"品牌编辑"},{footer:t(()=>[h("span",Q,[a(d,{onClick:l[6]||(l[6]=o=>e.dialogFormVisible=!1)},{default:t(()=>[n("取消")]),_:1}),a(d,{type:"primary",onClick:e.save},{default:t(()=>[n("保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[a(C,{model:e.brand},{default:t(()=>[a(s,{label:"名称","label-width":e.formLabelWidth},{default:t(()=>[a(p,{modelValue:e.brand.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.brand.name=o),placeholder:"请输入名称",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"制造商","label-width":e.formLabelWidth},{default:t(()=>[a(y,{modelValue:e.brand.factoryStatus,"onUpdate:modelValue":l[2]||(l[2]=o=>e.brand.factoryStatus=o),placeholder:"请选择是否为制造商",style:{width:"80%"}},{default:t(()=>[a(b,{label:"不是",value:0}),a(b,{label:"是",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"评论数量","label-width":e.formLabelWidth},{default:t(()=>[a(g,{modelValue:e.brand.productCommentCount,"onUpdate:modelValue":l[3]||(l[3]=o=>e.brand.productCommentCount=o),placeholder:"请输入评论数量",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"产品数量","label-width":e.formLabelWidth},{default:t(()=>[a(g,{modelValue:e.brand.productCount,"onUpdate:modelValue":l[4]||(l[4]=o=>e.brand.productCount=o),placeholder:"请输入产品数量",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),a(s,{label:"品牌故事","label-width":e.formLabelWidth},{default:t(()=>[a(p,{modelValue:e.brand.brandStory,"onUpdate:modelValue":l[5]||(l[5]=o=>e.brand.brandStory=o),placeholder:"请输入描述",type:"textarea",style:{width:"80%"},rows:5},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const te=V(H,[["render",R],["__scopeId","data-v-07566613"]]);export{te as default};
