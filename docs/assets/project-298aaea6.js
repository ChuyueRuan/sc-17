import{i as h,_ as S,d as E,r as k,o as I,c as U,a as f,b as l,w as o,F as B,e as n,t as b}from"./index-a0da786e.js";import{c as L,E as m,a as W,b as F,d as z,e as _,f as O,g as $}from"./el-table-column-ae829375.js";import{E as T,a as K,b as N,c as D}from"./el-form-item-49f3f214.js";import{E as A}from"./el-message-f42fc2e1.js";import{a as M}from"./projectCategory-cc444cf8.js";import{g as q}from"./brand-b93b9508.js";import{T as G}from"./TPaginationSelect-3c50ff69.js";function H(e){return h({url:"/mall/pms-product/page",method:"post",data:e})}function J(e){return h({url:`/mall/pms-product/one/${e}`,method:"get"})}function Q(e){return h({url:`/mall/pms-product/del/${e}`,method:"get"})}function R(e){return h({url:"/mall/pms-product/add",method:"post",data:e})}function X(e){return h({url:"/mall/pms-product/edit",method:"post",data:e})}const Y=E({data(){return{projects:[],categories:[],page:{total:0,current:1,size:10},selectPage:{total:0,current:1,size:6,pagerCount:5},selectBrandPage:{total:0,current:1,size:6,pagerCount:5},searchId:null,brands:[],dialogFormVisible:!1,project:{id:0,name:"",newStatus:0,originalPrice:0,previewStatus:0,price:0,productSn:"",publishStatus:0,unit:"",verifyStatus:0},formLabelWidth:80}},components:{"t-pagination-select":G},mounted(){this.getProjectsPage(1),this.getCategoriesPage(1),this.getBrandsPage(1)},methods:{getBrandsPage(e){q({current:e,size:6}).then(i=>{const s=i.data.page;this.brands=s.records,this.selectBrandPage=s}).catch(i=>{console.log(i)})},getCategoriesPage(e){M({current:e,size:6}).then(i=>{const s=i.data.page;this.categories=s.records,this.selectPage=s}).catch(i=>{console.log(i)})},pageBrandChange(e){this.getBrandsPage(e)},pageChange(e){this.getCategoriesPage(e)},search(){if(this.searchId==null||this.searchId==""){alert("请输入商品编号后查询");return}J(this.searchId).then(e=>{e.data==null?this.projects=[]:(this.projects=[],this.projects.push(e.data.help))}).catch(e=>{console.log(e)})},research(){this.searchId=null,this.getProjectsPage(1)},toEdit(e){this.dialogFormVisible=!0,this.project=L(e)},getProjectsPage(e){H({current:e,size:10}).then(i=>{console.log(i);const s=i.data.page;this.projects=s.records,this.page=s}).catch(i=>{console.log(i)})},currentchange(e){this.getProjectsPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),Q(e).then(t=>{if(t.success)this.getProjectsPage(this.page.current);else return!1}).catch(t=>{})},toAdd(){this.dialogFormVisible=!0,this.project={id:0,name:"",newStatus:0,originalPrice:0,previewStatus:0,price:0,productSn:"",publishStatus:0,unit:"",verifyStatus:0}},save(){const e=this.project;e.id==0?R(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getProjectsPage(this.page.current),m(t.msg);else return m(t.msg),!1}).catch(t=>{m("网络错误联系管理员")}):X(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getProjectsPage(this.page.current),m(t.msg);else return m(t.msg),!1}).catch(t=>{m("网络错误联系管理员")})}}}),Z={style:{"margin-top":"10px"}},x={style:{width:"95%",margin:"0 auto"}},ee={class:"dialog-footer"};function le(e,t,i,s,te,ae){const g=N,r=T,u=K,d=_,j=W,y=F,w=k("t-pagination-select"),V=A,p=O,c=$,P=D,C=z;return I(),U(B,null,[f("div",Z,[f("div",x,[l(r,{label:"商品编号","label-width":80,style:{display:"inline-flex","margin-right":"10px"}},{default:o(()=>[l(g,{modelValue:e.searchId,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchId=a),placeholder:"请输入商品编号"},null,8,["modelValue"])]),_:1}),l(u,{type:"primary",onClick:e.search},{default:o(()=>[n("查询")]),_:1},8,["onClick"]),l(u,{type:"warning",onClick:e.research},{default:o(()=>[n("重置")]),_:1},8,["onClick"]),l(u,{type:"success",onClick:e.toAdd},{default:o(()=>[n("添加")]),_:1},8,["onClick"])]),l(j,{data:e.projects,style:{width:"95%",margin:"0 auto"}},{default:o(()=>[l(d,{prop:"id",label:"编号",width:"80"}),l(d,{label:"货号",width:"120",prop:"productSn"}),l(d,{prop:"name",label:"名称",width:"120"}),l(d,{prop:"originalPrice",label:"市场价",width:"100"}),l(d,{label:"新品状态",width:"100"},{default:o(a=>[n(b(a.row.level==0?"不是新品":"新品"),1)]),_:1}),l(d,{label:"预告商品",width:"100"},{default:o(a=>[n(b(a.row.previewStatus==0?"不是":"是"),1)]),_:1}),l(d,{label:"价格",width:"100",prop:"price"}),l(d,{label:"上架状态",width:"100"},{default:o(a=>[n(b(a.row.publishStatus==0?"下架":"上架"),1)]),_:1}),l(d,{label:"单位",width:"100",prop:"unit"}),l(d,{label:"审核状态",width:"100"},{default:o(a=>[n(b(a.row.verifyStatus==0?"未审核":"审核通过"),1)]),_:1}),l(d,{label:"描述",width:"150",prop:"description"}),l(d,{fixed:"right",label:"功能管理",width:"120"},{default:o(a=>[l(u,{link:"",type:"primary",size:"small",onClick:v=>e.toEdit(a.row)},{default:o(()=>[n("更新")]),_:2},1032,["onClick"]),l(u,{link:"",type:"primary",size:"small",onClick:v=>e.del(a.row.id)},{default:o(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(y,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,style:{width:"95%",margin:"0 auto"},onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(C,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[14]||(t[14]=a=>e.dialogFormVisible=a),title:"商品编辑"},{footer:o(()=>[f("span",ee,[l(u,{onClick:t[13]||(t[13]=a=>e.dialogFormVisible=!1)},{default:o(()=>[n("取消")]),_:1}),l(u,{type:"primary",onClick:e.save},{default:o(()=>[n("保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(P,{model:e.project},{default:o(()=>[l(r,{label:"货号","label-width":e.formLabelWidth},{default:o(()=>[l(g,{modelValue:e.project.productSn,"onUpdate:modelValue":t[1]||(t[1]=a=>e.project.productSn=a),placeholder:"请输入货号",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"名称","label-width":e.formLabelWidth},{default:o(()=>[l(g,{modelValue:e.project.name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.project.name=a),placeholder:"请输入名称",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"商品分类","label-width":e.formLabelWidth},{default:o(()=>[l(w,{onPageChange:e.pageChange,optionSource:e.categories,modelValue:e.project.productCategoryId,"onUpdate:modelValue":t[3]||(t[3]=a=>e.project.productCategoryId=a),labelKey:"name",valueKey:"id",style:{width:"90%"},placeholder:"请选择商品分类",paginationOption:e.selectPage},null,8,["onPageChange","optionSource","modelValue","paginationOption"])]),_:1},8,["label-width"]),l(r,{label:"所属品牌","label-width":e.formLabelWidth},{default:o(()=>[l(w,{onPageChange:e.pageBrandChange,optionSource:e.brands,modelValue:e.project.brandId,"onUpdate:modelValue":t[4]||(t[4]=a=>e.project.brandId=a),labelKey:"name",valueKey:"id",style:{width:"90%"},placeholder:"请选择所属品牌",paginationOption:e.selectBrandPage},null,8,["onPageChange","optionSource","modelValue","paginationOption"])]),_:1},8,["label-width"]),l(r,{label:"市场价","label-width":e.formLabelWidth},{default:o(()=>[l(V,{modelValue:e.project.originalPrice,"onUpdate:modelValue":t[5]||(t[5]=a=>e.project.originalPrice=a),placeholder:"请输入市场价",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"新品状态","label-width":e.formLabelWidth},{default:o(()=>[l(c,{modelValue:e.project.newStatus,"onUpdate:modelValue":t[6]||(t[6]=a=>e.project.newStatus=a),placeholder:"请选择新品状态",style:{width:"80%"}},{default:o(()=>[l(p,{label:"不是新品",value:0}),l(p,{label:"新品",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"预告商品","label-width":e.formLabelWidth},{default:o(()=>[l(c,{modelValue:e.project.previewStatus,"onUpdate:modelValue":t[7]||(t[7]=a=>e.project.previewStatus=a),placeholder:"请选择预告商品",style:{width:"80%"}},{default:o(()=>[l(p,{label:"不是",value:0}),l(p,{label:"是",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"价格","label-width":e.formLabelWidth},{default:o(()=>[l(V,{modelValue:e.project.price,"onUpdate:modelValue":t[8]||(t[8]=a=>e.project.price=a),placeholder:"请输入价格",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"上架状态","label-width":e.formLabelWidth},{default:o(()=>[l(c,{modelValue:e.project.publishStatus,"onUpdate:modelValue":t[9]||(t[9]=a=>e.project.publishStatus=a),placeholder:"请选择上架状态",style:{width:"80%"}},{default:o(()=>[l(p,{label:"下架",value:0}),l(p,{label:"上架",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"单位","label-width":e.formLabelWidth},{default:o(()=>[l(g,{modelValue:e.project.unit,"onUpdate:modelValue":t[10]||(t[10]=a=>e.project.unit=a),placeholder:"请输入单位",style:{width:"80%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"审核状态","label-width":e.formLabelWidth},{default:o(()=>[l(c,{modelValue:e.project.verifyStatus,"onUpdate:modelValue":t[11]||(t[11]=a=>e.project.verifyStatus=a),placeholder:"请选择审核状态",style:{width:"80%"}},{default:o(()=>[l(p,{label:"未审核",value:0}),l(p,{label:"审核通过",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"描述","label-width":e.formLabelWidth},{default:o(()=>[l(g,{modelValue:e.project.description,"onUpdate:modelValue":t[12]||(t[12]=a=>e.project.description=a),placeholder:"请输入描述",type:"textarea",style:{width:"80%"},rows:3},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ue=S(Y,[["render",le],["__scopeId","data-v-864d35d5"]]);export{ue as default};
